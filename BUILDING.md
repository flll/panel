# ローカル開発
Pterodactylは現在、React、Typescript、Tailwindcssを使用し、そのコアにwebpackを使用してコンパイルされたアセットを生成しています。
Pterodactylのリリースバージョンには、すぐに使用できるプリコンパイル済み、最小化済み、ハッシュ化済みのアセットが含まれています。

しかし、カスタムテーマを実行したり、Reactファイルを変更したい場合は、これらのコンパイルされたアセットを生成するためのビルド
システムが必要になります。環境を設定するためには、最低限以下が必要です：

* [Node.js](https://nodejs.org/en/) v14.x.x
* [Yarn](https://classic.yarnpkg.com/lang/en/) v1.x.x
* [Go](https://golang.org/) 1.17.x

### 依存関係のインストール
```bash
yarn install
```

上記のコマンドは、Pterodactylのアセットをビルドするために必要なすべての依存関係をダウンロードします。その後、開発中にアセットを生成するために
以下のコマンドを実行するだけです。このコマンドを少なくとも一度実行するまで、`manifest.json`ファイルが見つからないという500エラーが
パネルに表示される可能性があります。これは以下のコマンドによって生成されます。

```bash
# 開発用のコンパイル済みアセットセットをビルドします。
yarn run build

# 変更されたアセットを自動的にビルドします。これにより、
# ページを更新してすぐに変更を確認できます。
yarn run watch
```

### ホットモジュールリローディング
より高度なユーザー向けに、Vueテンプレートファイルに加えた変更をページをリロードせずにすぐに確認できる「ホットモジュールリローディング」にも対応しています。
これを始めるには、以下のコマンドを実行するだけです。

```bash
PUBLIC_PATH=http://192.168.1.1:8080 yarn run serve --host 192.168.1.1
```

このコマンドには、特定の環境に合わせて変更する必要がある_非常に重要な_ 2つの部分があります。1つ目は`--host`フラグで、必須であり、`webpack-serve`サーバーが
実行されるマシンを指す必要があります。2つ目は、HMRサーバーを指すURLであり、Pterodactylで使用されるすべてのアセットURLに追加される`PUBLIC_PATH`環境変数です。

#### 開発環境
[`pterodactyl/development`](https://github.com/pterodactyl/development)環境を使用している場合は、追加の設定は必要ありません。
`yarn run serve`を実行するだけでHMRサーバーを実行できます。

### 本番環境用のビルド
ファイルを整理してライブサーバーに準備ができたら、本番環境にプッシュするためにコンパイル済み、最小化済み、ハッシュ化済みのアセットを生成する必要があります。
そのためには、以下のコマンドを実行します：

```bash
yarn run build:production
```

これにより、`public/assets/`に配置される本番用のJSバンドルと関連アセットが生成され、クライアントが使用するためにサーバーやCDNにアップロードする必要があります。

### Wingsの実行
開発中に`wings`を実行するには、新しいノードを追加するときと同じように設定ファイルを設定し、Wingsのコードディレクトリで`make debug`を実行するだけです。
これはLinux VMで実行する必要があり、macOSやWindowsではローカルで実行することはできません。

